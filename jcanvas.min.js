/*
 jCanvas v6.0b
Copyright 2012, Caleb Evans
Licensed under the MIT license
*/
(function(d,P,T,N,U,m,C,f,t){function y(){}function A(c){c?x(V,c):A.prefs=V=y.prototype=x({},K);return this}function F(c,a){c.fillStyle=a.fillStyle;c.strokeStyle=a.strokeStyle;c.lineWidth=a.strokeWidth;a.rounded?(c.lineCap="round",c.lineJoin="round"):(c.lineCap=a.strokeCap,c.lineJoin=a.strokeJoin,c.miterLimit=a.miterLimit);c.shadowOffsetX=a.shadowX;c.shadowOffsetY=a.shadowY;c.shadowBlur=a.shadowBlur;c.shadowColor=a.shadowColor;c.globalAlpha=a.opacity;c.globalCompositeOperation=a.compositing}function w(c){return c&&
c.getContext?c.getContext("2d"):f}function H(c,a){a.closed&&c.closePath();c.fill();"transparent"!==a.fillStyle&&(c.shadowColor="transparent");c.stroke();a.closed||c.closePath();a._toRad&&c.restore();a.mask&&(a.autosave&&c.save(),c.clip())}function W(c,a){if(!a.translateX&&!a.translateY&&(a.x||a.y))a.translateX=a.x,a.translateY=a.y;a.translate&&(a.translateX=a.translateY=a.translate);c.translate(a.translateX,a.translateY)}function X(c,a){1!==a.scale&&(a.scaleX=a.scaleY=a.scale);c.translate(a.x,a.y);
c.scale(a.scaleX,a.scaleY);c.translate(-a.x,-a.y)}function Y(c,a){a._toRad=a.inDegrees?z/180:1;a.rotate=a.rotate||a.angle;c.translate(a.x,a.y);c.rotate(a.rotate*a._toRad);c.translate(-a.x,-a.y)}function E(c,a,b,e,d){b._toRad=b.inDegrees?z/180:1;a.save();d=d||e;!c&&!b.fromCenter&&(b.x+=e/2,b.y+=d/2);(b.rotate||b.angle)&&Y(a,b);(1!==b.scale||1!==b.scaleX||1!==b.scaleY)&&X(a,b);(b.translate||b.translateX||b.translateY)&&W(a,b)}function O(c){var a=d.data(c,"jCanvas");a||(a=d.data(c,"jCanvas",{layers:[],
intersects:[],drag:{},event:{}}));return a}function Z(c,a,b){b&&b.visible&&(b.method===d.fn.draw?b.fn.call(c[0],a):b.method&&b.method.call(c,b))}function D(c,a,b){var e,o,h,B="function"===typeof a,p,a=a||{};if(a.layer&&!a._layer){e=d(c);o=e.getLayers();B&&(a={method:d.fn.draw,fn:a});a=x(new y,a);if(!B){a.method=d.fn[a.method]||b;p=O(c);for(h in A.events)A.events.hasOwnProperty(h)&&a[h]&&(A.events[h](e,p),a._event=m);if(a.draggable){a._event=m;c=["mousedown","mousemove","mouseup"];for(b=0;b<c.length;b+=
1)h=c[b],A.events[h](e,p);p.mouseout||(e.bind("mouseout.jCanvas",function(){p.drag={};e.drawLayers()}),p.mouseout=m)}}a.layer=m;a._layer=m;a.index===t&&(a.index=o.length);o.splice(a.index,0,a)}}function $(c){var a;for(a=0;a<I.length;a+=1)c[I[a]]=c["_"+I[a]]}function aa(c){var a;for(a=0;a<I.length;a+=1)c["_"+I[a]]=c[I[a]]}function ba(c){var a,b,e=[],o=1;c.match(/^#?[a-z0-9]+$/i)&&("transparent"===c&&(c="rgba(255, 255, 255, 0)"),b=P.head,a=b.style.color,b.style.color=c,c=d.css(b,"color"),b.style.color=
a);c.match(/^rgb/i)&&(e=c.match(/[0-9]+/gi),c.match(/%/gi)&&(o=2.55),e[0]*=o,e[1]*=o,e[2]*=o,e[3]=e[3]!==t?U(e[3]):1);return e}function ea(c){var a=3,b;"object"!==typeof c.start&&(c.start=ba(c.start),c.end=ba(c.end));c.now=[];if(1!==c.start[3]||1!==c.end[3])a=4;for(b=0;b<a;b+=1)c.now[b]=c.start[b]+(c.end[b]-c.start[b])*c.pos,3>b&&(c.now[b]=L(c.now[b]));1!==c.start[3]||1!==c.end[3]?c.now="rgba("+c.now.join(",")+")":(c.now.slice(0,3),c.now="rgb("+c.now.join(",")+")");c.elem.style?c.elem.style[c.prop]=
c.now:c.elem[c.prop]=c.now}function J(c){A.events[c]=function(a,b){var e="mouseover"===c||"mouseout"===c?"mousemove":c,d=b.event;b[e]||(a.bind(e+".jCanvas",function(b){d.x=b.offsetX;d.y=b.offsetY;d.type=e;a.drawLayers(m);b.preventDefault()}),b[e]=m)}}function G(c,a,b){var c=O(c),e=c.event,a=a.isPointInPath(e.x,e.y);b.mouseX=e.x;b.mouseY=e.y;!a&&(b._hovered&&!b._fired)&&(b._mousedout=m);a&&c.intersects.push(b)}function ca(c,a,b){var e,o=/\b(\d*\.?\d*)\w\w\b/gi;if(M.text===b.text&&M.font===b.font)b.width=
M.width,b.height=M.height;else{b.width=a.measureText(b.text).width;a=c.style.fontSize;if(e=b.font.match(o))c.style.fontSize=b.font.match(o)[0];b.height=U(d.css(c,"fontSize"));c.style.fontSize=a}}var K,V,x=d.extend,L=N.round,z=N.PI,da=N.sin,Q=N.cos,fa=d.event.fix,M={},I;d.fn.jCanvas=A;A.version="6.0b";A.events={};K={angle:0,align:"center",autosave:m,baseline:"middle",bringToFront:C,ccw:C,closed:C,compositing:"source-over",cornerRadius:0,cropFromCenter:m,draggable:!1,each:f,end:360,fillStyle:"transparent",
font:"12pt sans-serif",fromCenter:m,height:f,inDegrees:m,load:f,mask:C,method:f,miterLimit:10,opacity:1,projection:0,r1:f,r2:f,radius:0,repeat:"repeat",rotate:0,rounded:C,scale:1,scaleX:1,scaleY:1,shadowBlur:0,shadowColor:"transparent",shadowX:0,shadowY:0,sHeight:f,sides:3,source:"",start:0,strokeCap:"butt",strokeJoin:"miter",strokeStyle:"transparent",strokeWidth:1,sWidth:f,sx:f,sy:f,text:"",translate:0,translateX:0,translateY:0,visible:m,width:f,x:0,y:0};A();A.extend=function(c){K=x(K,c.props);A();
c.name&&(d.fn[c.name]=function(a){var b,e,d=x(new y,a);for(b=0;b<this.length;b+=1)if(a=this[b],e=w(a))F(e,d),c.fn.call(a,e,d);return this});return d.fn[c.name]};d.fn.getLayers=function(){var c=this[0];return!c||!c.getContext?[]:O(c).layers};d.fn.getLayer=function(c){var a=this.getLayers(),b;if(!c||!c.layer){if("string"===typeof c)for(b=0;b<a.length;b+=1)if(a[b].name===c){c=b;break}c=a[c||0]}return c};d.fn.setLayer=function(c,a){var b,e;c||(a=c,c=0);for(b=0;b<this.length;b+=1)e=d(this[b]).getLayer(c),
x(e,a);return this};d.fn.removeLayer=function(c){var a,b,e,o;for(a=0;a<this.length;a+=1){b=d(this[a]).getLayers();if("string"===typeof c)for(o=0;o<b.length;o+=1){if(b[o].name===c){e=o;break}}else e=c||"";b[e]&&b.splice(e,1)}return this};d.fn.removeLayers=function(){var c,a;for(a=0;a<this.length;a+=1)c=d(this[a]).getLayers(),c.length=0;return this};d.fn.getLayerGroup=function(c){var a=this.getLayers(),b=[],e;if(c!==t)for(e=0;e<a.length;e+=1)a[e].group===c&&b.push(a[e]);return b};d.fn.setLayerGroup=
function(c,a){var b,e,o;for(b=0;b<this.length;b+=1){e=d(this[b]).getLayers();for(o=0;o<e.length;o+=1)e[o].group===c&&x(e[o],a)}return this};d.fn.removeLayerGroup=function(c){var a,b,e;if(c!==t)for(a=0;a<this.length;a+=1){b=d(this[a]).getLayers();for(e=0;e<b.length;e+=1)b[e].group===c&&(b.splice(e,1),e-=1)}return this};d.fn.drawLayer=function(c){var a,b,e,o;for(a=0;a<this.length;a+=1)e=d(this[a]),b=w(this[a]),o=e.getLayer(c),Z(e,b,o);return this};d.fn.drawLayers=function(c){var a,b,e,o,h,B,p;for(b=
0;b<this.length;b+=1)if(a=d(this[b]),e=w(this[b])){e.clearRect(0,0,this[b].width,this[b].height);p=O(this[b]);o=p.layers;for(B=0;B<o.length;B+=1)if(h=o[B],h.index=B,c&&(h._fired=C),Z(a,e,h),h._mousedout)h._mousedout=C,h._fired=m,h._hovered=C,h.mouseout&&h.mouseout.call(this[b],h);h=p.intersects[p.intersects.length-1]||{};a=p.event;a=a.type;B=h[a];e=p.drag;if(h._event){if((h.mouseover||h.mouseout)&&!h._hovered&&!h._fired)h._fired=m,h._hovered=m,h.mouseover&&h.mouseover.call(this[b],h);B&&!h._fired&&
(h._fired=m,B.call(this[b],h));h.draggable&&"mousedown"===a&&(h.bringToFront&&(o.splice(h.index,1),h.index=o.push(h)),e.layer=h,e.dragging=m,e.startX=h.x,e.startY=h.y,e.endX=h.mouseX,e.endY=h.mouseY,h.dragstart&&h.dragstart.call(this[b],h))}if(e.layer&&(e.dragging&&"mouseup"===a&&(e.layer.dragstop&&e.layer.dragstop.call(this[b],e.layer),p.drag={}),e.dragging&&"mousemove"===a))e.layer.x=e.layer.mouseX-(e.endX-e.startX),e.layer.y=e.layer.mouseY-(e.endY-e.startY),e.layer.drag&&e.layer.drag.call(this[b],
e.layer)}p.intersects=[];return this};d.fn.addLayer=function(c){var a,b,c=c||{};for(a=0;a<this.length;a+=1)if(b=w(this[a]))c.layer=m,D(this[a],c);return this};I=["width","height","opacity"];d.fn.animateLayer=function(){function c(a,b){return function(){$(b);a.drawLayers();h[4]&&h[4].call(a[0],b)}}function a(a,b){return function(c,e){$(b);a.drawLayers();h[5]&&h[5].call(a[0],c,e,b)}}var b,e,o,h=[].slice.call(arguments,0);"object"===typeof h[0]&&!h[0].layer&&h.unshift(0);"object"===typeof h[2]?(h.splice(2,
0,h[2].duration||f),h.splice(3,0,h[3].easing||f),h.splice(4,0,h[4].complete||f),h.splice(5,0,h[5].step||f)):(h[2]===t?(h.splice(2,0,f),h.splice(3,0,f),h.splice(4,0,f)):"function"===typeof h[2]&&(h.splice(2,0,f),h.splice(3,0,f)),h[3]===t)?(h[3]=f,h.splice(4,0,f)):"function"===typeof h[3]&&h.splice(3,0,f);for(e=0;e<this.length;e+=1)if(b=d(this[e]),o=w(this[e]))if((o=b.getLayer(h[0]))&&o.method!==d.fn.draw)aa(o),aa(h[1]),d(o).animate(h[1],{duration:h[2],easing:d.easing[h[3]]?h[3]:f,complete:c(b,o),step:a(b,
o)});return this};d.fn.delayLayer=function(c,a){var b,e,a=a||0;for(b=0;b<this.length;b+=1)e=d(this[b]).getLayer(c),d(e).delay(a);return this};d.fn.stopLayer=function(c,a){var b,e;for(b=0;b<this.length;b+=1)e=d(this[b]).getLayer(c),d(e).stop(a);return this};(function(c){var a;for(a=0;a<c.length;a+=1)d.fx.step[c[a]]=ea})("color backgroundColor borderColor borderTopColor borderRightColor borderBottomColor borderLeftColor fillStyle outlineColor strokeStyle shadowColor".split(" "));J("click");J("dblclick");
J("mousedown");J("mouseup");J("mousemove");J("mouseover");J("mouseout");d.event.fix=function(c){var a,c=fa.call(d.event,c);if(c.pageX!==t&&c.offsetX===t&&(a=d(c.target).offset()))c.offsetX=c.pageX-a.left,c.offsetY=c.pageY-a.top;return c};d.fn.draw=function a(b){var e,d,b=b||{};"function"===typeof b&&(b={fn:b});for(e=0;e<this.length;e+=1)if((d=w(this[e]))&&b.fn)D(this[e],b,a),b.fn.call(this[e],d);return this};d.fn.clearCanvas=function(a){for(var b,e=x(new y,a),a=0;a<this.length;a+=1)if(b=w(this[a]))E(a,
b,e,e.width,e.height),!e.x||!e.y||!e.width||!e.height?b.clearRect(0,0,this[a].width,this[a].height):b.clearRect(e.x-e.width/2,e.y-e.height/2,e.width,e.height);return this};d.fn.saveCanvas=function(){var a,b;for(a=0;a<this.length;a+=1)(b=w(this[a]))&&b.save();return this};d.fn.restoreCanvas=function(){var a,b;for(a=0;a<this.length;a+=1)(b=w(this[a]))&&b.restore();return this};d.fn.translateCanvas=function(a){for(var b,e=x(new y,a),a=0;a<this.length;a+=1)if(b=w(this[a]))e.autosave&&b.save(),W(b,e);
return this};d.fn.scaleCanvas=function(a){for(var b,e=x(new y,a),a=0;a<this.length;a+=1)if(b=w(this[a]))e.autosave&&b.save(),X(b,e);return this};d.fn.rotateCanvas=function(a){for(var b,e=x(new y,a),a=0;a<this.length;a+=1)if(b=w(this[a]))e.autosave&&b.save(),Y(b,e);return this};d.fn.drawRect=function b(e){var d,h,f=x(new y,e),p,q,s,u,i;for(d=0;d<this.length;d+=1)if(h=w(this[d]))D(this[d],e,b),F(h,f),E(d,h,f,f.width,f.height),h.beginPath(),p=f.x-f.width/2,q=f.y-f.height/2,(i=f.cornerRadius)?(f.closed=
m,s=f.x+f.width/2,u=f.y+f.height/2,0>s-p-2*i&&(i=(s-p)/2),0>u-q-2*i&&(i=(u-q)/2),h.moveTo(p+i,q),h.lineTo(s-i,q),h.arc(s-i,q+i,i,3*z/2,2*z,C),h.lineTo(s,u-i),h.arc(s-i,u-i,i,0,z/2,C),h.lineTo(p+i,u),h.arc(p+i,u-i,i,z/2,z,C),h.lineTo(p,q+i),h.arc(p+i,q+i,i,z,3*z/2,C)):h.rect(p,q,f.width,f.height),f._event&&G(this[d],h,e),H(h,f);return this};d.fn.drawArc=function e(d){var h,f,p=x(new y,d);!p.inDegrees&&360===p.end&&(p.end=2*z);for(h=0;h<this.length;h+=1)if(f=w(this[h]))D(this[h],d,e),F(f,p),E(h,f,p,
2*p.radius),f.beginPath(),f.arc(p.x,p.y,p.radius,p.start*p._toRad-z/2,p.end*p._toRad-z/2,p.ccw),p._event&&G(this[h],f,d),H(f,p);return this};d.fn.drawEllipse=function o(h){var d,f,q=x(new y,h),s=4*q.width/3,u=q.height;q.closed=m;for(d=0;d<this.length;d+=1)if(f=w(this[d]))D(this[d],h,o),F(f,q),E(d,f,q,q.width,q.height),f.beginPath(),f.moveTo(q.x,q.y-u/2),f.bezierCurveTo(q.x-s/2,q.y-u/2,q.x-s/2,q.y+u/2,q.x,q.y+u/2),f.bezierCurveTo(q.x+s/2,q.y+u/2,q.x+s/2,q.y-u/2,q.x,q.y-u/2),q._event&&G(this[d],f,h),
H(f,q);return this};d.fn.drawPolygon=function h(d){var f,q,s=x(new y,d),u=2*z/s.sides,i=z/s.sides,k=i+z/2,l=s.radius*Q(u/2),n,r,j;s.closed=m;for(f=0;f<this.length;f+=1)if(q=w(this[f])){D(this[f],d,h);F(q,s);E(f,q,s,2*s.radius);q.beginPath();for(j=0;j<s.sides;j+=1)n=s.x+L(s.radius*Q(k)),r=s.y+L(s.radius*da(k)),q.lineTo(n,r),s.projection&&(n=s.x+L((l+l*s.projection)*Q(k+i)),r=s.y+L((l+l*s.projection)*da(k+i)),q.lineTo(n,r)),k+=u;s._event&&G(this[f],q,d);H(q,s)}return this};d.fn.drawLine=function B(d){var f,
s,u=x(new y,d),i,k,l;for(f=0;f<this.length;f+=1)if(s=w(this[f])){D(this[f],d,B);F(s,u);E(f,s,u,0);i=1;for(s.beginPath();m;)if(k=u["x"+i],l=u["y"+i],k!==t&&l!==t)s.lineTo(k,l),i+=1;else break;u._event&&G(this[f],s,d);H(s,u)}return this};d.fn.drawQuad=function p(d){var f,u,i=x(new y,d),k,l,n,r,j;for(f=0;f<this.length;f+=1)if(u=w(this[f])){D(this[f],d,p);F(u,i);E(f,u,i,0);k=2;u.beginPath();for(u.moveTo(i.x1,i.y1);m;)if(l=i["x"+k],n=i["y"+k],r=i["cx"+(k-1)],j=i["cy"+(k-1)],l!==t&&n!==t&&r!==t&&j!==t)u.quadraticCurveTo(r,
j,l,n),k+=1;else break;i._event&&G(this[f],u,d);H(u,i)}return this};d.fn.drawBezier=function q(d){var f,i,k=x(new y,d),l,n,r,j,g,v,R,S;for(f=0;f<this.length;f+=1)if(i=w(this[f])){D(this[f],d,q);F(i,k);E(f,i,k,0);l=2;n=1;i.beginPath();for(i.moveTo(k.x1,k.y1);m;)if(r=k["x"+l],j=k["y"+l],g=k["cx"+n],v=k["cy"+n],R=k["cx"+(n+1)],S=k["cy"+(n+1)],r!==t&&j!==t&&g!==t&&v!==t&&R!==t&&S!==t)i.bezierCurveTo(g,v,R,S,r,j),l+=1,n+=2;else break;k._event&&G(this[f],i,d);H(i,k)}return this};d.fn.drawText=function s(f){var i,
k,l=x(new y,f);for(i=0;i<this.length;i+=1)if(d(this[i]),k=w(this[i]))(D(this[i],f,s),F(k,l),k.textBaseline=l.baseline,k.textAlign=l.align,k.font=l.font,l.layer&&ca(this[i],k,l),E(i,k,l,l.width,l.height),k.fillText(l.text,l.x,l.y),"transparent"!==l.fillStyle&&(k.shadowColor="transparent"),k.strokeText(l.text,l.x,l.y),l._event)?(k.beginPath(),k.rect(l.x-l.width/2,l.y-l.height/2,l.width,l.height),k.restore(),G(this[i],k,f),k.closePath()):k.restore();M=l;return this};d.fn.measureText=function(f){var d=
x(new y,f);(f=w(this[0]))&&ca(this[0],f,d);return d};d.fn.drawImage=function u(d){function k(k,u,j){return function(){u||((t=v.width/v.height,g.width===f&&g.sWidth===f&&(d.width=g.width=g.sWidth=v.width),g.height===f&&g.sHeight===f&&(d.height=g.height=g.sHeight=v.height),g.width===f&&g.sWidth!==f&&(g.width=g.sWidth),g.height===f&&g.sHeight!==f&&(g.height=g.sHeight),g.sWidth===f&&g.width!==f&&(d.sWidth=g.sWidth=v.width),g.sHeight===f&&g.height!==f&&(d.sHeight=g.sHeight=v.height),g.sx===f&&(g.sx=g.cropFromCenter?
v.width/2:0),g.sy===f&&(g.sy=g.cropFromCenter?v.height/2:0),g.cropFromCenter||(g.sx+=g.sWidth/2,g.sy+=g.sHeight/2),g.sx+g.sWidth/2>v.width&&(g.sx=v.width-g.sWidth/2),0>g.sx-g.sWidth/2&&(g.sx=g.sWidth/2),0>g.sy-g.sHeight/2&&(g.sy=g.sHeight/2),g.sy+g.sHeight/2>v.height&&(g.sy=v.height-g.sHeight/2),g.width!==f&&g.height===f)?d.height=g.height=g.width/t:g.width===f&&g.height!==f?d.width=g.width=g.height*t:g.width===f&&g.height===f&&(d.width=g.width=v.width,d.height=g.height=v.height));E(u,j,g,g.width,
g.height);j.drawImage(v,g.sx-g.sWidth/2,g.sy-g.sHeight/2,g.sWidth,g.sHeight,g.x-g.width/2,g.y-g.height/2,g.width,g.height);g._event?(j.beginPath(),j.rect(g.x-g.width/2,g.y-g.height/2,g.width,g.height),j.restore(),G(l[u],j,d),j.closePath()):j.restore();g.load&&g.load.call(k,d)}}var l=this,n,r,j,g=x(new y,d),v,m,t;m=g.source.getContext;g.source.src||m?(v=g.source,g.width=v.width,g.height=v.height):g.source&&(v=new T,v.src=g.source);for(r=0;r<l.length;r+=1)if(n=l[r],j=w(l[r]))D(l[r],d,u),F(j,g),v&&(v.complete||
m?k(n,r,j)():v.onload=k(n,r,j));return l};d.fn.createPattern=d.fn.pattern=function(d){function i(){j=l.createPattern(r,n.repeat);n.load&&n.load.call(k[0],j)}var k=this,l,n=x(new y,d),r,j;(l=w(k[0]))?"function"===typeof n.source?(r=P.createElement("canvas"),r.width=n.width,r.height=n.height,d=w(r),n.source.call(r,d),i()):(d=n.source.getContext,n.source.src||d?r=n.source:(r=new T,r.src=n.source),r.complete||d?i():r.onload=i):j=f;return j};d.fn.createGradient=d.fn.gradient=function(d){var i,d=x(new y,
d),k=[],l,n,r,j,g,v,m;if(i=w(this[0])){d.x1=d.x1||0;d.y1=d.y1||0;d.x2=d.x2||0;d.y2=d.y2||0;i=d.r1!==f||d.r2!==f?i.createRadialGradient(d.x1,d.y1,d.r1,d.x2,d.y2,d.r2):i.createLinearGradient(d.x1,d.y1,d.x2,d.y2);for(j=1;d["c"+j]!==t;j+=1)d["s"+j]!==t?k.push(d["s"+j]):k.push(f);l=k.length;k[0]===f&&(k[0]=0);k[l-1]===f&&(k[l-1]=1);for(j=0;j<l;j+=1){if(k[j]!==f){v=1;m=0;n=k[j];for(g=j+1;g<l;g+=1)if(k[g]!==f){r=k[g];break}else v+=1;n>r&&(k[g]=k[j])}else k[j]===f&&(m+=1,k[j]=n+m*((r-n)/v));i.addColorStop(k[j],
d["c"+(j+1)])}}else i=f;return i};d.fn.setPixels=function i(d){var f,n,r,j=x(new y,d),g={},v,m,t,z;for(n=0;n<this.length;n+=1)if(f=this[n],r=w(f)){D(this[n],d,i);E(n,r,j,j.width,j.height);if(!j.x||!j.y||!j.width||!j.height)j.width=f.width,j.height=f.height,j.x=j.width/2,j.y=j.height/2;v=r.getImageData(j.x-j.width/2,j.y-j.height/2,j.width,j.height);m=v.data;z=m.length;g=[];if(j.each)for(t=0;t<z;t+=4)g.r=m[t],g.g=m[t+1],g.b=m[t+2],g.a=m[t+3],j.each.call(f,g),m[t]=g.r,m[t+1]=g.g,m[t+2]=g.b,m[t+3]=g.a;
r.putImageData(v,j.x-j.width/2,j.y-j.height/2);r.restore()}return this};d.fn.getCanvasImage=function(d,k){var l=this[0];return l&&l.toDataURL?l.toDataURL("image/"+d,k):f};d.support.canvas=P.createElement("canvas").getContext!==t;A.defaults=K;d.jCanvas=A})(jQuery,document,Image,Math,parseFloat,!0,!1,null);
